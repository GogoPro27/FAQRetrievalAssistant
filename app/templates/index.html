<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FAQ Retrieval Assistant</title>
</head>
<body>

<h1>FAQ Retrieval Assistant</h1>

<form method="POST">
    <label>
        <input
                type="text"
                name="query"
                placeholder="Ask a question..."
                value="{{ query }}"
                required
        >
    </label>
    <button type="submit">Search</button>
</form>

{% if error_message %}
  <p style="color: red;">
    <strong>Error:</strong> {{ error_message }}
  </p>
{% endif %}

{% if results %}
<h2>Top Results</h2>
{% if below_threshold %}
<p><em>I'm not fully confident, but these might help:</em></p>
{% else %}
<p><strong>Confidence:</strong> {{ confidence }}</p>
{% endif %}

<ul>
    {% for r in results %}
    <li>
        <strong>Q:</strong> {{ r.question }}<br>
        <strong>A:</strong> {{ r.answer }}<br>
        <strong>Similarity: {{ "%.3f"|format(r.similarity) }}</strong>
    </li>
    <br>
    {% endfor %}
</ul>
{% endif %}

{% if not results and query %}
<p><em>No relevant results found.</em></p>
{% endif %}

</body>
</html>